<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/monokai-sublime.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.0/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.15.0/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.15.0/dist/contrib/auto-render.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@3.0.7/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false}
                ]
            });
            document.querySelectorAll('.code-content').forEach((block) => {
                hljs.highlightElement(block);
            });
        });
    </script>
</head>
<body>
    <div id="container">
        {% for section in sections %}
            <div class="section">
                <div class="docs">
                    <div class="section-link">
                        <a href="#{{ section.id }}">#</a>
                    </div>
                    <h2>{{ section.title }}</h2>
                     <div id="description-{{ section.id }}"></div>
                    <script>
                        document.getElementById('description-{{ section.id }}').innerHTML = marked(`{{ section.description }}`);
                    </script>
                </div>
                <div class="code">
                    <pre><code class="language-{{section.lang}}">
                        {% for line in section.code %}
                        <span class="line">{{ line.line_num }} <span class="code-content language-{{section.lang}}">{{ line.content }}</span></span>
                        {% endfor %}
                    </code></pre>
                </div>
            </div>
        {% endfor %}
    </div>
<script src="interactive.js"></script>
<script>
    function handleImages() {
        var images = document.querySelectorAll('p>img');
        images.forEach(function(img) {
            img.parentElement.style.textAlign = 'center';
            var modal = document.createElement('div');
            modal.id = 'modal';
            var modalContent = document.createElement('div');
            modal.appendChild(modalContent);
            var modalImage = document.createElement('img');
            modalContent.appendChild(modalImage);
            var span = document.createElement('span');
            span.classList.add('close');
            span.textContent = 'Ã—';
            modal.appendChild(span);

            img.onclick = function() {
                console.log('Image clicked');
                document.body.appendChild(modal);
                modalImage.src = this.src;
            };

            span.onclick = function() {
                document.body.removeChild(modal);
            };
        });
    }
    handleImages();
</script>
</body>
</html>
